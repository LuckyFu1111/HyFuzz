# ============================================================================
# HyFuzz Windows Server Configuration
# ============================================================================
# Copy this file to .env and customize for your environment
# ============================================================================

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8080
MCP_SERVER_TRANSPORTS=stdio,http,websocket

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
DATABASE_URL=sqlite:///data/hyfuzz.db
# For PostgreSQL: postgresql://user:password@localhost/hyfuzz
# For MySQL: mysql://user:password@localhost/hyfuzz
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_ECHO=false

# ----------------------------------------------------------------------------
# LLM Configuration
# ----------------------------------------------------------------------------
# Ollama endpoint for local LLM inference
OLLAMA_ENDPOINT=http://localhost:11434
OLLAMA_MODEL=mistral
OLLAMA_TIMEOUT=120

# OpenAI API (alternative to Ollama)
# OPENAI_API_KEY=your-api-key-here
# OPENAI_MODEL=gpt-4
# OPENAI_BASE_URL=https://api.openai.com/v1

# LLM Judge Configuration
JUDGE_MODEL=mistral
JUDGE_TEMPERATURE=0.7
JUDGE_MAX_TOKENS=1000

# Payload Generator Configuration
GENERATOR_MODEL=mistral
GENERATOR_TEMPERATURE=0.8
GENERATOR_MAX_TOKENS=500
GENERATOR_CREATIVITY=0.7

# ----------------------------------------------------------------------------
# Defense Integration
# ----------------------------------------------------------------------------
DEFENSE_ENABLED=true
DEFENSE_MODULES=signature_detector,anomaly_detector,behavior_analyzer
DEFENSE_BLOCK_THRESHOLD=0.8
DEFENSE_INVESTIGATE_THRESHOLD=0.5
DEFENSE_MONITOR_THRESHOLD=0.2

# ----------------------------------------------------------------------------
# Task Queue Configuration
# ----------------------------------------------------------------------------
TASK_QUEUE_BACKEND=memory
# For Redis: redis://localhost:6379/0
# For RabbitMQ: amqp://guest:guest@localhost:5672/
TASK_QUEUE_NAME=fuzzing_tasks
TASK_QUEUE_MAX_SIZE=1000
WORKER_CONCURRENCY=4

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=logs/server.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
LOG_FORMAT=json
# Format options: json, text

# ----------------------------------------------------------------------------
# Cache Configuration
# ----------------------------------------------------------------------------
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
# For Redis cache: CACHE_BACKEND=redis
CACHE_BACKEND=memory

# ----------------------------------------------------------------------------
# Monitoring and Metrics
# ----------------------------------------------------------------------------
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_EXPORT_INTERVAL=60

# Dashboard Configuration
DASHBOARD_ENABLED=true
DASHBOARD_PORT=8888
DASHBOARD_REFRESH_INTERVAL=5

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------
# JWT Secret for authentication tokens
# CRITICAL: Change this to a strong random value in production!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# JWT_SECRET=<your-secret-key-here>

# API Keys for external access (comma-separated)
# API_KEYS=key1,key2,key3

# Enable HTTPS
ENABLE_HTTPS=false
# SSL_CERT_FILE=certs/server.crt
# SSL_KEY_FILE=certs/server.key

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8888

# ----------------------------------------------------------------------------
# Protocol Configuration
# ----------------------------------------------------------------------------
# Supported protocols
PROTOCOLS=coap,modbus,mqtt,http

# Protocol timeouts (seconds)
PROTOCOL_TIMEOUT_COAP=5
PROTOCOL_TIMEOUT_MODBUS=5
PROTOCOL_TIMEOUT_MQTT=10
PROTOCOL_TIMEOUT_HTTP=15

# ----------------------------------------------------------------------------
# Campaign Configuration
# ----------------------------------------------------------------------------
# Default campaign settings
DEFAULT_PAYLOAD_COUNT=10
DEFAULT_MAX_EXECUTION_TIME=3600
DEFAULT_OUTPUT_DIR=results

# Feedback loop configuration
FEEDBACK_ENABLED=true
FEEDBACK_MODE=incremental
FEEDBACK_AGGREGATION_WINDOW=10
FEEDBACK_LEARNING_RATE=0.1

# ----------------------------------------------------------------------------
# Ubuntu Client Configuration
# ----------------------------------------------------------------------------
# Client endpoints for distributed execution
CLIENT_ENDPOINTS=http://localhost:8001
# Multiple clients: http://client1:8001,http://client2:8001

CLIENT_TIMEOUT=30
CLIENT_RETRY_COUNT=3
CLIENT_RETRY_BACKOFF=2

# ----------------------------------------------------------------------------
# Knowledge Base Configuration
# ----------------------------------------------------------------------------
KNOWLEDGE_BASE_PATH=data/knowledge
CWE_DATABASE=data/knowledge/cwe.db
CVE_DATABASE=data/knowledge/cve.db
PROTOCOL_SPECS_PATH=data/knowledge/protocols

# ----------------------------------------------------------------------------
# Development/Debug Configuration
# ----------------------------------------------------------------------------
DEBUG=false
DEVELOPMENT_MODE=false
ENABLE_HOT_RELOAD=false
ENABLE_PROFILING=false

# Mock mode for testing
MOCK_LLM=false
MOCK_DEFENSE=false
MOCK_EXECUTION=false

# ----------------------------------------------------------------------------
# Resource Limits
# ----------------------------------------------------------------------------
MAX_CONCURRENT_CAMPAIGNS=5
MAX_PAYLOADS_PER_CAMPAIGN=1000
MAX_MEMORY_MB=2048
MAX_CPU_PERCENT=80

# ----------------------------------------------------------------------------
# Notification Configuration
# ----------------------------------------------------------------------------
# Email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-password
# SMTP_FROM=noreply@hyfuzz.local
# ALERT_EMAIL=admin@hyfuzz.local

# Slack notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ----------------------------------------------------------------------------
# Backup Configuration
# ----------------------------------------------------------------------------
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=data/backups

# ============================================================================
# End of Configuration
# ============================================================================
